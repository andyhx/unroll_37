%clear;
load('Model_Expression.mat');
load('Model_Shape.mat');
load('meanstd.mat');
fid=fopen('/home/brl/vertex.txt','rt');
vertex3d=textscan(fid,'%f ');
vertex3d=vertex3d{1};
vertex3d=reshape(vertex3d,3,length(vertex3d)/3);
% vertex3d = reshape(vertex3d, 3, length(vertex3d)/3);
vertex4d = vertex3d;
vertex4d(4, :) = 1;
%m=para_new_true(229:236);
m=[0.000357591 1.41137e-06 -0.000194502 64.4213 -3.26591e-07 0.000414911 -5.79576e-05 54.0305];
key_point=[21874, 22150,	21654,	21037,	43237,	44919,	46167,	47136,	47915,	48696,	49668,	50925,	52614,	33679,	33006,	32470,	32710,	38696,	39393,	39783,	39988,	40155,	40894,	41060,	41268,	41662,	42368,	8162,	8178,	8188,	8193,	6516,	7244,	8205,	9164,	9884,	2216,	3887,	4921,	5829,	4802,	3641,	10456,	11354,	12384,	14067,	12654,	11493,	5523,	6026,	7496,	8216,	8936,	10396,	10796,	9556,	8837,	8237,	7637,	6916,	5910,	7385,	8224,	9065,	10538,	8830,	8230,	7630];
M(1, :) = m(1:4);
M(2, :) = m(5:8);
vertex2d = M*vertex4d;
vertex2d(2,:) = size(img, 1) + 1 - vertex2d(2,:);
% %landmark = vertex2d(:, keypoints);
vertex2d=vertex2d(:,key_point);
img=imread('/home/brl/data/unrolling/test.jpg');
figure,imshow(img);
hold on;
plot(vertex2d(1,:), vertex2d(2,:), 'g.');
%plot(vertex2d(1,:), vertex2d(2,:), 'g.');
% % plot(landmark(1,:), landmark(2,:), 'r*');
figure, plot_mesh(vertex3d', tri');